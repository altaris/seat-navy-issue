
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Authentication &#8212; SeAT Navy Issue alpha documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration facility" href="configuration.html" />
    <link rel="prev" title="OpenAPI specification" href="openapi.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration facility"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="openapi.html" title="OpenAPI specification"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SeAT Navy Issue alpha documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="authentication">
<h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<p>An application that wishes to use SNI must use an <em>app token</em> in order to get a
<em>user token</em>, with which API request can be done. There are two kinds of app tokens.</p>
<ul>
<li><p><strong>Permanent app token</strong>: this token is tied to a user, and inherits the
privileges of that user.</p>
<img alt="_images/auth_permanent_token.png" src="_images/auth_permanent_token.png" />
<p>See <a class="reference internal" href="apiserver.html#sni.routers.token.PostUseFromPerOut" title="sni.routers.token.PostUseFromPerOut"><code class="xref py py-class docutils literal notranslate"><span class="pre">sni.routers.token.PostUseFromPerOut</span></code></a> for the response model.</p>
</li>
<li><p><strong>Dynamic app token</strong>: this token is tied to <code class="docutils literal notranslate"><span class="pre">root</span></code>, and requires the user
to authenticate via the ESI SSO; the user token inherits the privileges of
the user that logged in.</p>
<img alt="_images/auth_dynamic_token.png" src="_images/auth_dynamic_token.png" />
<p>See <a class="reference internal" href="apiserver.html#sni.routers.token.PostTokenUseFromDynOut" title="sni.routers.token.PostTokenUseFromDynOut"><code class="xref py py-class docutils literal notranslate"><span class="pre">sni.routers.token.PostTokenUseFromDynOut</span></code></a> for the response model.
The notification sent by SNI to the application looks like this (see also
<a class="reference internal" href="apiserver.html#sni.routers.esi.PostCallbackEsiOut" title="sni.routers.esi.PostCallbackEsiOut"><code class="xref py py-class docutils literal notranslate"><span class="pre">sni.routers.esi.PostCallbackEsiOut</span></code></a>)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;character_id&quot;</span><span class="p">:</span> <span class="mi">0000000000</span><span class="p">,</span>
  <span class="nt">&quot;state_code&quot;</span><span class="p">:</span> <span class="s2">&quot;dcbd81af-4df0-478b-a8b9-baee74e2d517&quot;</span><span class="p">,</span>
  <span class="nt">&quot;user_token&quot;</span><span class="p">:</span> <span class="s2">&quot;eyJhbGciOiJIUzI1NiIsIn...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
<p>Once a user token is obtained, all subsequent requests (for that user) should
be authenticated with it.</p>
<p>App and user tokens take the form of a JWT bearer token, and must be included
to requests under the <code class="docutils literal notranslate"><span class="pre">Authorization</span></code> header:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Authorization</span><span class="p">:</span> <span class="n">Bearer</span> <span class="o">&lt;</span><span class="n">token</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>User tokens deriving from a permanent app tokens are themselves permanent, but
expire after 48h of inactivity. User tokens deriving from dynamic app tokens
are valid for 24h. Note that user and app tokens can be manually revoked. If an
app token is revoked, then user tokens deriving from it are also revoked.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="openapi.html"
                        title="previous chapter">OpenAPI specification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="configuration.html"
                        title="next chapter">Configuration facility</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/authentication.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="configuration.html" title="Configuration facility"
             >next</a> |</li>
        <li class="right" >
          <a href="openapi.html" title="OpenAPI specification"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SeAT Navy Issue alpha documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Cédric HT.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>